<VirtualHost *:80>
    ServerName localhost
    # ServerAlias d6-dev-estation2web.ies.jrc.it
    # ServerAlias d6-dev-estation3.jrc.it
    # ServerName estation2.jrc.ec.europa.eu
    # ServerAlias d6-dev-estation2web.ies.jrc.it
    # ServerAlias d6-dev-estation2web.jrc.it
    DocumentRoot /var/www/estation2

    # APACHE VIRTUAL HOST CUSTOM  LOG DEFINITION
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined_estation2
    LogFormat "%h %l %u %t \"%r\" %>s %b" common_estation2
    ErrorLog /var/log/apache2/estation2_error.log
    CustomLog /var/log/apache2/estation2_access.log combined_estation2
    # END APACHE VIRTUAL HOST CUSTOM  LOG DEFINITION

    # APACHE VIRTUAL HOST DOCUMENTROOT DEFINITION
    <Directory /var/www/estation2>
        AllowOverride All
        Options -Indexes -FollowSymLinks
        Require all granted
    </Directory>
    # END APACHE VIRTUAL HOST DOCUMENTROOT DEFINITION

    ##############################
    # WEB.PY SETUP
    ##############################
    # WSGIDaemonProcess estation2 python-path=/var/www/estation2
    WSGIDaemonProcess estation2 python-path=/root/miniconda3/lib/python3.7/site-packages
    # WSGIPythonPath /root/miniconda3/lib/python3.7/site-packages
    WSGIProcessGroup estation2
    # WSGIScriptAlias / /var/www/estation2/wsgi_test_script.py process-group=estation2
    WSGIScriptAlias / /var/www/estation2/webpy_esapp.py process-group=estation2


    Alias /lib/ /var/www/estation2/lib/
    Alias /app/ /var/www/estation2/apps/gui/esapp/app/
    Alias /resources/ /var/www/estation2/apps/gui/esapp/build/production/esapp/resources/
    Alias /microloader.js /var/www/estation2/apps/gui/esapp/build/production/esapp/microloader.js
    Alias /app.json /var/www/estation2/apps/gui/esapp/build/production/esapp/app.json
    Alias /app.js /var/www/estation2/apps/gui/esapp/build/production/esapp/app.js
    Alias /static /var/www/estation2/apps/gui/esapp/build/production/esapp


  <Location /cgi-bin/mapserv>
        ProxyPass http://mapserver:80/cgi-bin/mapserv
        ProxyPassReverse http://mapserver:80/cgi-bin/mapserv
        Header add X-Script-Name "/cgi-bin/mapserv"
        Header add Host "d6-dev-estation2web.jrc.it"
        RequestHeader set X-Script-Name "/cgi-bin/mapserv"
        RequestHeader set Host "d6-dev-estation2web.jrc.it"  
    </Location>

# <Location /cgi-bin/>
#         Require ip 139.191.0.0/16
# </Location>

#   SuexecUserGroup apache apache
#    <Proxy "unix:/var/run/php-fpm/www.sock|fcgi://php-fpm">
#        ProxySet disablereuse=off
#    </Proxy>

#    <FilesMatch \.php$>
#        SetHandler proxy:fcgi://php-fpm
#    </FilesMatch>

</VirtualHost>
